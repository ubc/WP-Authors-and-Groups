(()=>{"use strict";const e=window.ReactJSXRuntime;!function(s){const{registerPlugin:r}=s.plugins,{PluginDocumentSettingPanel:t}=s.editPost,{CheckboxControl:o}=s.components,{useSelect:a,useDispatch:u,useRegistry:n}=s.data,{__}=s.i18n,{useState:d,useEffect:p,useCallback:c}=s.element,i=s.apiFetch;r("wp-authors-and-groups",{render:()=>{const s=n(),{meta:r,postType:l}=a(e=>({meta:e("core/editor").getEditedPostAttribute("meta"),postType:e("core/editor").getCurrentPostType()}),[]),{editPost:h}=u("core/editor"),_=Array.isArray(r?.wp_authors_and_groups_selected_users)?r.wp_authors_and_groups_selected_users:[],g=Array.isArray(r?.wp_authors_and_groups_selected_groups)?r.wp_authors_and_groups_selected_groups:[],[w,m]=d([]),[x,y]=d(!0),[j,A]=d([]),[b,P]=d(!0);p(()=>{i({path:"/wp/v2/users?per_page=100&orderby=name&order=asc"}).then(e=>{m(e),y(!1)}).catch(()=>{y(!1)})},[]),p(()=>{i({path:"/wp-authors-and-groups/v1/user-groups"}).then(e=>{A(e),P(!1)}).catch(()=>{P(!1)})},[]);const f=c((e,r)=>{const t=s.select("core/editor").getEditedPostAttribute("meta"),o=Array.isArray(t?.wp_authors_and_groups_selected_groups)?t.wp_authors_and_groups_selected_groups:[],a=r?o.includes(e)?o:[...o,e]:o.filter(s=>s!==e);h({meta:{...t,wp_authors_and_groups_selected_groups:a}})},[s,h]),k=c((e,r)=>{const t=s.select("core/editor").getEditedPostAttribute("meta"),o=Array.isArray(t?.wp_authors_and_groups_selected_users)?t.wp_authors_and_groups_selected_users:[],a=r?o.includes(e)?o:[...o,e]:o.filter(s=>s!==e);h({meta:{...t,wp_authors_and_groups_selected_users:a}})},[s,h]);if("post"!==l&&"page"!==l)return null;const v=x||b;return(0,e.jsx)(t,{name:"wp-authors-and-groups-panel",title:__("Authors and Groups","wp-authors-and-groups"),className:"wp-authors-and-groups-panel",initialOpen:!0,children:v?(0,e.jsx)("p",{children:__("Loading...","wp-authors-and-groups")}):(0,e.jsxs)(e.Fragment,{children:[j.length>0&&(0,e.jsxs)("div",{className:"wp-authors-and-groups-section",children:[(0,e.jsx)("h4",{children:__("User Groups","wp-authors-and-groups")}),(0,e.jsx)("div",{className:"wp-authors-and-groups-checkboxes",children:j.map(s=>(0,e.jsx)(o,{label:s.name,checked:g.includes(s.id),onChange:e=>f(s.id,e)},s.id))})]}),w.length>0&&(0,e.jsxs)("div",{className:"wp-authors-and-groups-section",children:[(0,e.jsx)("h4",{children:__("Users","wp-authors-and-groups")}),(0,e.jsx)("div",{className:"wp-authors-and-groups-checkboxes",children:w.map(s=>(0,e.jsx)(o,{label:s.name,checked:_.includes(s.id),onChange:e=>k(s.id,e)},s.id))})]}),0===j.length&&0===w.length&&(0,e.jsx)("p",{children:__("No user groups or users found.","wp-authors-and-groups")})]})})},icon:"groups"})}(window.wp)})();