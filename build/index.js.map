{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wp-author-groups/external window \"ReactJSXRuntime\"","webpack://wp-author-groups/webpack/bootstrap","webpack://wp-author-groups/webpack/runtime/compat get default export","webpack://wp-author-groups/webpack/runtime/define property getters","webpack://wp-author-groups/webpack/runtime/hasOwnProperty shorthand","webpack://wp-author-groups/webpack/runtime/make namespace object","webpack://wp-author-groups/./index.js"],"sourcesContent":["module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","(function (wp) {\n\tconst { registerPlugin } = wp.plugins;\n\tconst { PluginDocumentSettingPanel } = wp.editPost;\n\tconst { CheckboxControl } = wp.components;\n\tconst { useSelect, useDispatch, useRegistry } = wp.data;\n\tconst { __ } = wp.i18n;\n\tconst { useState, useEffect, useCallback } = wp.element;\n\tconst apiFetch = wp.apiFetch;\n\n\tconst AuthorGroupsPanel = () => {\n\t\tconst registry = useRegistry();\n\t\tconst { meta, postType } = useSelect((select) => {\n\t\t\treturn {\n\t\t\t\tmeta: select('core/editor').getEditedPostAttribute('meta'),\n\t\t\t\tpostType: select('core/editor').getCurrentPostType(),\n\t\t\t};\n\t\t}, []);\n\n\t\tconst { editPost } = useDispatch('core/editor');\n\n\t\t// Get current selected users - expect array of user IDs\n\t\tconst selectedUsers = Array.isArray(meta?.['wp_authors_and_groups_selected_users'])\n\t\t\t? meta['wp_authors_and_groups_selected_users']\n\t\t\t: [];\n\n\t\t// Get current selected groups - expect array of group term IDs\n\t\tconst selectedGroups = Array.isArray(meta?.['wp_authors_and_groups_selected_groups'])\n\t\t\t? meta['wp_authors_and_groups_selected_groups']\n\t\t\t: [];\n\n\t\t// State for users list\n\t\tconst [users, setUsers] = useState([]);\n\t\tconst [isLoadingUsers, setIsLoadingUsers] = useState(true);\n\n\t\t// State for user groups list\n\t\tconst [userGroups, setUserGroups] = useState([]);\n\t\tconst [isLoadingGroups, setIsLoadingGroups] = useState(true);\n\n\t\t// Fetch users on component mount\n\t\tuseEffect(() => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/wp/v2/users?per_page=100&orderby=name&order=asc',\n\t\t\t})\n\t\t\t\t.then((fetchedUsers) => {\n\t\t\t\t\tsetUsers(fetchedUsers);\n\t\t\t\t\tsetIsLoadingUsers(false);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tsetIsLoadingUsers(false);\n\t\t\t\t});\n\t\t}, []);\n\n\t\t// Fetch user groups on component mount\n\t\tuseEffect(() => {\n\t\t\tapiFetch({\n\t\t\t\tpath: '/wp-authors-and-groups/v1/user-groups',\n\t\t\t})\n\t\t\t\t.then((fetchedGroups) => {\n\t\t\t\t\tsetUserGroups(fetchedGroups);\n\t\t\t\t\tsetIsLoadingGroups(false);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tsetIsLoadingGroups(false);\n\t\t\t\t});\n\t\t}, []);\n\n\t\t// Handle checkbox change for groups\n\t\tconst handleGroupToggle = useCallback((groupId, isChecked) => {\n\t\t\t// Get the latest meta from the store\n\t\t\tconst currentMeta = registry.select('core/editor').getEditedPostAttribute('meta');\n\t\t\tconst currentGroups = Array.isArray(currentMeta?.['wp_authors_and_groups_selected_groups'])\n\t\t\t\t? currentMeta['wp_authors_and_groups_selected_groups']\n\t\t\t\t: [];\n\n\t\t\tconst newGroups = isChecked\n\t\t\t\t? currentGroups.includes(groupId)\n\t\t\t\t\t? currentGroups\n\t\t\t\t\t: [...currentGroups, groupId]\n\t\t\t\t: currentGroups.filter((id) => id !== groupId);\n\n\t\t\t// Save to post meta immediately\n\t\t\teditPost({\n\t\t\t\tmeta: {\n\t\t\t\t\t...currentMeta,\n\t\t\t\t\twp_authors_and_groups_selected_groups: newGroups,\n\t\t\t\t},\n\t\t\t});\n\t\t}, [registry, editPost]);\n\n\t\tconst handleUserToggle = useCallback((userId, isChecked) => {\n\t\t\t// Get the latest meta from the store\n\t\t\tconst currentMeta = registry.select('core/editor').getEditedPostAttribute('meta');\n\t\t\tconst currentUsers = Array.isArray(currentMeta?.['wp_authors_and_groups_selected_users'])\n\t\t\t\t? currentMeta['wp_authors_and_groups_selected_users']\n\t\t\t\t: [];\n\n\t\t\tconst newUsers = isChecked\n\t\t\t\t? currentUsers.includes(userId)\n\t\t\t\t\t? currentUsers\n\t\t\t\t\t: [...currentUsers, userId]\n\t\t\t\t: currentUsers.filter((id) => id !== userId);\n\n\t\t\t// Save to post meta immediately\n\t\t\teditPost({\n\t\t\t\tmeta: {\n\t\t\t\t\t...currentMeta,\n\t\t\t\t\twp_authors_and_groups_selected_users: newUsers,\n\t\t\t\t},\n\t\t\t});\n\t\t}, [registry, editPost]);\n\n\t\t// Only show for posts and pages\n\t\tif (postType !== 'post' && postType !== 'page') {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isLoading = isLoadingUsers || isLoadingGroups;\n\n\t\treturn (\n\t\t\t<PluginDocumentSettingPanel\n\t\t\t\tname=\"wp-authors-and-groups-panel\"\n\t\t\t\ttitle={__('Authors and Groups', 'wp-authors-and-groups')}\n\t\t\t\tclassName=\"wp-authors-and-groups-panel\"\n\t\t\t\tinitialOpen={true}\n\t\t\t>\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<p>{__('Loading...', 'wp-authors-and-groups')}</p>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{userGroups.length > 0 && (\n\t\t\t\t\t\t\t<div className=\"wp-authors-and-groups-section\">\n\t\t\t\t\t\t\t\t<h4>{__('User Groups', 'wp-authors-and-groups')}</h4>\n\t\t\t\t\t\t\t\t<div className=\"wp-authors-and-groups-checkboxes\">\n\t\t\t\t\t\t\t\t\t{userGroups.map((group) => (\n\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\tkey={group.id}\n\t\t\t\t\t\t\t\t\t\t\tlabel={group.name}\n\t\t\t\t\t\t\t\t\t\t\tchecked={selectedGroups.includes(group.id)}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => handleGroupToggle(group.id, checked)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{users.length > 0 && (\n\t\t\t\t\t\t\t<div className=\"wp-authors-and-groups-section\">\n\t\t\t\t\t\t\t\t<h4>{__('Users', 'wp-authors-and-groups')}</h4>\n\t\t\t\t\t\t\t\t<div className=\"wp-authors-and-groups-checkboxes\">\n\t\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\tkey={user.id}\n\t\t\t\t\t\t\t\t\t\t\tlabel={user.name}\n\t\t\t\t\t\t\t\t\t\t\tchecked={selectedUsers.includes(user.id)}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => handleUserToggle(user.id, checked)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{userGroups.length === 0 && users.length === 0 && (\n\t\t\t\t\t\t\t<p>{__('No user groups or users found.', 'wp-authors-and-groups')}</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PluginDocumentSettingPanel>\n\t\t);\n\t};\n\n\tregisterPlugin('wp-authors-and-groups', {\n\t\trender: AuthorGroupsPanel,\n\t\ticon: 'groups',\n\t});\n})(window.wp);"],"names":["wp","registerPlugin","plugins","PluginDocumentSettingPanel","editPost","CheckboxControl","components","useSelect","useDispatch","useRegistry","data","__","i18n","useState","useEffect","useCallback","element","apiFetch","AuthorGroupsPanel","registry","meta","postType","select","getEditedPostAttribute","getCurrentPostType","selectedUsers","Array","isArray","selectedGroups","users","setUsers","isLoadingUsers","setIsLoadingUsers","userGroups","setUserGroups","isLoadingGroups","setIsLoadingGroups","path","then","fetchedUsers","catch","fetchedGroups","handleGroupToggle","groupId","isChecked","currentMeta","currentGroups","newGroups","includes","filter","id","wp_authors_and_groups_selected_groups","handleUserToggle","userId","currentUsers","newUsers","wp_authors_and_groups_selected_users","isLoading","_jsx","name","title","className","initialOpen","children","_jsxs","_Fragment","length","map","group","label","checked","onChange","user","render","icon","window"],"ignoreList":[],"sourceRoot":""}