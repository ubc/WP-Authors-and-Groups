(()=>{"use strict";var r={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},d:(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},o:(r,e)=>Object.prototype.hasOwnProperty.call(r,e)};const e=window.wp.serverSideRender;var o=r.n(e);const t=window.ReactJSXRuntime,{addFilter:s}=wp.hooks,{PanelBody:a,SelectControl:u}=wp.components,{InspectorControls:n,useBlockProps:p}=wp.blockEditor,{__}=wp.i18n,{useEffect:i,useState:l,useMemo:d}=wp.element,c=wp.apiFetch;s("editor.BlockEdit","wp-authors-and-groups/query-loop-filter",r=>e=>{const{attributes:o,setAttributes:s,name:p}=e;if("core/query"!==p)return(0,t.jsx)(r,{...e});const h=o?.query||{},[w,g]=l([]),[y,b]=l([]),[A,v]=l(!0);i(()=>{(async()=>{try{const r=await c({path:"/wp/v2/users?per_page=100&orderby=name&order=asc"}),e=await c({path:"/wp-authors-and-groups/v1/user-groups"});g(Array.isArray(r)?r:[]),b(Array.isArray(e)?e:[]),v(!1)}catch(r){console.error("Error fetching users/groups:",r),v(!1)}})()},[]);const f=d(()=>{const r=[{label:__("All Authors","wp-authors-and-groups"),value:""}];return y.forEach(e=>{r.push({label:`${e.name} (${__("Group","wp-authors-and-groups")})`,value:`group-${e.id}`})}),w.forEach(e=>{r.push({label:e.name,value:`user-${e.id}`})}),r},[w,y]),j=h.wpAuthorsAndGroupsFilter||"";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{...e}),(0,t.jsx)(n,{children:(0,t.jsx)(a,{title:__("Authors and Groups Filter","wp-authors-and-groups"),initialOpen:!1,children:A?(0,t.jsx)("p",{children:__("Loading...","wp-authors-and-groups")}):(0,t.jsx)(u,{label:__("Filter by Author or Group","wp-authors-and-groups"),value:j,options:f,onChange:r=>{const e={...h,wpAuthorsAndGroupsFilter:r||void 0};r||delete e.wpAuthorsAndGroupsFilter,s({query:e})},help:__("Filter posts by specific authors or user groups assigned via the Authors and Groups plugin.","wp-authors-and-groups")})})})]})}),s("editor.BlockEdit","wp-authors-and-groups/force-server-render",r=>e=>{const{name:s,attributes:a}=e;if(!["core/post-author","core/post-author-name"].includes(s))return(0,t.jsx)(r,{...e});const u=p();return(0,t.jsx)("div",{...u,children:(0,t.jsx)(o(),{block:s,attributes:a})})})})();