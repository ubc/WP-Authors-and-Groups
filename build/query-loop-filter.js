(()=>{"use strict";const r=window.ReactJSXRuntime,{addFilter:s}=wp.hooks,{PanelBody:e,SelectControl:o}=wp.components,{InspectorControls:t}=wp.blockEditor,{__}=wp.i18n,{useEffect:u,useState:a,useMemo:p}=wp.element,n=wp.apiFetch;s("editor.BlockEdit","wp-authors-and-groups/query-loop-filter",s=>i=>{const{attributes:l,setAttributes:h,name:d}=i;if("core/query"!==d)return(0,r.jsx)(s,{...i});const c=l?.query||{},[w,g]=a([]),[A,y]=a([]),[b,m]=a(!0);u(()=>{(async()=>{try{const r=await n({path:"/wp/v2/users?per_page=100&orderby=name&order=asc"}),s=await n({path:"/wp-authors-and-groups/v1/user-groups"});g(Array.isArray(r)?r:[]),y(Array.isArray(s)?s:[]),m(!1)}catch(r){console.error("Error fetching users/groups:",r),m(!1)}})()},[]);const F=p(()=>{const r=[{label:__("All Authors","wp-authors-and-groups"),value:""}];return A.forEach(s=>{r.push({label:`${s.name} (${__("Group","wp-authors-and-groups")})`,value:`group-${s.id}`})}),w.forEach(s=>{r.push({label:s.name,value:`user-${s.id}`})}),r},[w,A]),f=c.wpAuthorsAndGroupsFilter||"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{...i}),(0,r.jsx)(t,{children:(0,r.jsx)(e,{title:__("Authors and Groups Filter","wp-authors-and-groups"),initialOpen:!1,children:b?(0,r.jsx)("p",{children:__("Loading...","wp-authors-and-groups")}):(0,r.jsx)(o,{label:__("Filter by Author or Group","wp-authors-and-groups"),value:f,options:F,onChange:r=>{const s={...c,wpAuthorsAndGroupsFilter:r||void 0};r||delete s.wpAuthorsAndGroupsFilter,h({query:s})},help:__("Filter posts by specific authors or user groups assigned via the Authors and Groups plugin.","wp-authors-and-groups")})})})]})})})();